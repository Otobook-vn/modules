package model

import (
	"time"

	"gorm.io/datatypes"
)

// Notification ...
type Notification struct {
	ID          string `gorm:"primaryKey"`
	Category    string
	Type        string
	ActionValue string
	Data        datatypes.JSON // Custom format for each type of notification
	IsRead      bool
	CreatedAt   time.Time

	// Ref
	User   User `gorm:"foreignKey:UserID"`
	UserID string
}

// TableName overrides the table name
func (Notification) TableName() string {
	return "notifications"
}

// NotificationData ...
type NotificationData struct {
	Title    string `json:"title,omitempty"`
	Content  string `json:"content,omitempty"`
	URL      string `json:"url,omitempty"`
	Status   string `json:"status,omitempty"`
	UserID   string `json:"userId,omitempty"`
	UserName string `json:"userName,omitempty"`
	Photo    string `json:"photo,omitempty"`
}

// NotificationAction ...
type NotificationAction struct {
	Type  string `json:"type"`
	Value string `json:"value"`
}

// NotificationPushData ...
type NotificationPushData struct {
	ID      string              `json:"id"`
	Title   string              `json:"title"`
	Content string              `json:"content"`
	Action  *NotificationAction `json:"action"`
	Photo   string              `json:"photo"`
}

// NotificationResponse ...
type NotificationResponse struct {
	ID      string              `json:"id"`
	Title   string              `json:"title"`
	Content string              `json:"content"`
	Action  *NotificationAction `json:"action"`
	Photo   string              `json:"photo"`
	Data    *NotificationData   `json:"-"`
}
